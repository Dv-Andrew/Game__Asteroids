!function(s){var e={};function h(t){if(e[t])return e[t].exports;var i=e[t]={i:t,l:!1,exports:{}};return s[t].call(i.exports,i,i.exports,h),i.l=!0,i.exports}h.m=s,h.c=e,h.d=function(t,i,s){h.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:s})},h.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},h.t=function(i,t){if(1&t&&(i=h(i)),8&t)return i;if(4&t&&"object"==typeof i&&i&&i.__esModule)return i;var s=Object.create(null);if(h.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:i}),2&t&&"string"!=typeof i)for(var e in i)h.d(s,e,function(t){return i[t]}.bind(null,e));return s},h.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return h.d(i,"a",i),i},h.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},h.p="/js/",h(h.s=0)}([function(t,i,s){t.exports=s(1)},function(t,i,s){"use strict";var e;new((e=s(2),e&&e.__esModule?e:{default:e}).default)(".game__asteroids")},function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var e=s(3);function h(t,i){for(var s=0;s<i.length;s++){var e=i[s];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}var a=function(){function s(t){!function(t,i){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}(this),this.canvas=document.querySelector(t),this.context=this.canvas.getContext("2d"),this.canvas.focus(),this.drawGuides=!1,this.isGameOver=!1,this.isNewGame=!0,this.isLevelComplete=!1,this.level=1,this.shipMass=100,this.shipRadius=15,this.asteroidMass=5e3,this.asteroidPushForce=7e4,this.healthIndicator=new e.ProgressIndicator(this.context,5,5,150,15,"Health"),this.levelIndicator=new e.NumbersIndicator(this.context,this.canvas.width/2,20,"Level",{textSize:15,textAlign:"center"}),this.scoreMultiplerIndicator=new e.NumbersIndicator(this.context,this.canvas.width-150,20,"X",{digits:1,textSize:15,textAlign:"center"}),this.scoreIndicator=new e.NumbersIndicator(this.context,this.canvas.width-10,20,"Score",{textSize:15,textAlign:"end"}),this.fpsIndicator=new e.NumbersIndicator(this.context,this.canvas.width-10,this.canvas.height-5,"fps",{digits:2}),this.message=new e.Message(this.context,this.canvas.width/2,.4*this.canvas.height),this.score=0,this.scorePoints=100,this.scoreMultipler=1,this.canvas.addEventListener("keydown",this.keyDown.bind(this),!0),this.canvas.addEventListener("keyup",this.keyUp.bind(this),!0),window.requestAnimationFrame(this.frame.bind(this))}return h(s.prototype,[{key:"frame",value:function(t){this.previousTime||(this.previousTime=t);var i=t-this.previousTime;this.previousTime=t,this.fps=1e3/i,this.update(i/1e3),this.draw(),window.requestAnimationFrame(this.frame.bind(this))}},{key:"update",value:function(h){this.isNewGame||(this.ship.isCompromised=!1,this.asteroids.forEach(function(t){t.update(h),this.isCollision(t,this.ship)&&(this.ship.isCompromised=!0,this.scoreMultipler=1)},this),this.ship.health<=0?this.isGameOver=!0:(this.ship.update(h),this.projectiles.forEach(function(s,e,t){s.update(h),s.life<=0?this.projectiles.splice(e,1):this.asteroids.forEach(function(t,i){this.isCollision(t,s)&&(this.projectiles.splice(e,1),this.asteroids.splice(i,1),this.splitAsteroid(t,h))},this)},this),0!=this.asteroids.length?this.ship.isLoaded&&this.ship.isShooting&&this.projectiles.push(this.ship.shoot(h)):this.isLevelComplete=!0))}},{key:"draw",value:function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.isNewGame?this.message.draw("ASTEROIDS",'Press "Space" to start playing'):(this.drawGuides&&(this.asteroids.forEach(function(i){this.drawLine(i,this.ship),this.projectiles.forEach(function(t){this.drawLine(i,t)},this)},this),this.fpsIndicator.draw(this.fps)),this.asteroids.forEach(function(t){t.draw({drawGuides:this.drawGuides})},this),this.isGameOver?this.message.draw("GAME OVER",'Press "Space" to play again',this.score):(this.projectiles.forEach(function(t){t.draw()},this),this.ship.draw({drawGuides:this.drawGuides}),this.levelIndicator.draw(this.level),this.isLevelComplete?this.message.draw("LEVEL COMPLETED",'Press "Space" to start the next level',this.score):(this.healthIndicator.draw(this.ship.maxHealth,this.ship.health),this.levelIndicator.draw(this.level),this.scoreIndicator.draw(this.score),this.scoreMultiplerIndicator.draw(this.scoreMultipler))))}},{key:"keyDown",value:function(t){this.keyHandler(t,!0)}},{key:"keyUp",value:function(t){this.keyHandler(t,!1)}},{key:"keyHandler",value:function(t,i){var s=!1;switch(t.key||t.keyCode){case"ArrowLeft":case 37:this.ship.leftThruster=i;break;case"ArrowUp":case 38:this.ship.isThrusterOn=i;break;case"ArrowRight":case 39:this.ship.rightThruster=i;break;case" ":case 32:this.isGameOver||this.isNewGame?this.restartGame():this.isLevelComplete?this.levelUp():this.ship.isShooting=i;break;case"g":case 71:i&&(this.drawGuides=!this.drawGuides);break;default:s=!0}s||t.preventDefault()}},{key:"addAsteroid",value:function(t){var i=this.newAsteroid();return this.pushAsteroidInRandomDirection(i,t),i}},{key:"newAsteroid",value:function(){return new e.Asteroid(this.context,this.canvas.width*Math.random(),this.canvas.height*Math.random(),this.asteroidMass)}},{key:"pushAsteroidInRandomDirection",value:function(t,i){i=i||.015,t.push(2*Math.PI*Math.random(),100*this.asteroidPushForce,i),t.twist((Math.random()-.5)*Math.PI*(100*this.asteroidPushForce)*.02,i)}},{key:"isCollision",value:function(t,i){return this.distanceBetween(t,i)<t.radius+i.radius}},{key:"distanceBetween",value:function(t,i){return Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2))}},{key:"splitAsteroid",value:function(t,i){t.mass-=this.ship.weaponPower,this.score+=this.scorePoints*this.scoreMultipler,this.scoreMultipler+=.1;var s=.25+.5*Math.random();[t.child(t.mass*s),t.child(t.mass*(1-s))].forEach(function(t){t.mass<this.ship.weaponPower?this.score+=t.mass:(this.pushAsteroidInRandomDirection(t,i),this.asteroids.push(t))},this)}},{key:"restartGame",value:function(){this.isNewGame&&(this.isNewGame=!1),this.isGameOver=!1,this.score=0,this.level=0,this.ship=new e.Ship(this.context,this.canvas.width/2,this.canvas.height/2,1e3,500,.5,200),this.projectiles=[],this.asteroids=[],this.levelUp()}},{key:"levelUp",value:function(){this.isLevelComplete=!1,this.level++;for(var t=0;t<this.level;t++)this.asteroids.push(this.addAsteroid())}},{key:"drawLine",value:function(t,i){this.context.save(),this.context.strokeStyle="white",this.context.lineWidth=.5,this.context.beginPath(),this.context.moveTo(t.x,t.y),this.context.lineTo(i.x,i.y),this.context.stroke(),this.context.restore()}}]),s}();i.default=a},function(t,i,s){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,i){return!i||"object"!==e(i)&&"function"!=typeof i?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):i}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),i&&a(t,i)}function a(t,i){return(a=Object.setPrototypeOf||function(t,i){return t.__proto__=i,t})(t,i)}function x(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function r(t,i){for(var s=0;s<i.length;s++){var e=i[s];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function n(t,i,s){return i&&r(t.prototype,i),s&&r(t,s),t}Object.defineProperty(i,"__esModule",{value:!0}),i.Message=i.NumbersIndicator=i.ProgressIndicator=i.Projectile=i.Ship=i.Asteroid=i.SpaceObject=void 0;var c=function(){function c(t,i,s,e,h,a,r,n,o){x(this,c),this.ctx=t,this.x=i,this.y=s,this.mass=e||1,this.radius=h||50,this.angle=a||0,this.x_speed=r||0,this.y_speed=n||0,this.rotation_speed=o||0}return n(c,[{key:"update",value:function(t){this.x+=this.x_speed*t,this.y+=this.y_speed*t,this.angle+=this.rotation_speed*t,this.angle%=2*Math.PI,this.x-this.radius>this.ctx.canvas.width&&(this.x=-this.radius),this.x+this.radius<0&&(this.x=this.ctx.canvas.width+this.radius),this.y-this.radius>this.ctx.canvas.height&&(this.y=-this.radius),this.y+this.radius<0&&(this.y=this.ctx.canvas.height+this.radius)}},{key:"push",value:function(t,i,s){this.x_speed+=s*(Math.cos(t)*i)/this.mass,this.y_speed+=s*(Math.sin(t)*i)/this.mass}},{key:"twist",value:function(t,i){this.rotation_speed+=i*t/this.mass}},{key:"speed",value:function(){return Math.sqrt(Math.pow(this.x_speed,2)+Math.pow(this.y_speed,2))}},{key:"movement_angle",value:function(){return Math.atan2(this.y_speed,this.x_speed)}},{key:"draw",value:function(){this.ctx.save(),this.ctx.translate(this.x,this.y),this.ctx.rotate(this.angle),this.ctx.beginPath(),this.ctx.arc(0,0,this.radius,0,2*Math.PI),this.ctx.lineTo(0,0),this.ctx.strokeStyle="#FFFFFF",this.ctx.stroke(),this.ctx.restore()}}]),c}();i.SpaceObject=c;var o=function(t){function l(t,i,s,e,h,a,r){var n;x(this,l);var o=Math.sqrt(e/1/Math.PI);(n=u(this,d(l).call(this,t,i,s,e,o,0,h,a,r))).circumference=2*Math.PI*n.radius,n.segments=Math.ceil(n.circumference/15),n.segments=Math.min(25,Math.max(5,n.segments)),n.noise=.2,n.shape=[];for(var c=0;c<n.segments;c++)n.shape.push(2*(Math.random()-.5));return n}return h(l,c),n(l,[{key:"draw",value:function(t){this.options=t||{},this.ctx.save(),this.ctx.translate(this.x,this.y),this.ctx.rotate(this.angle),this.ctx.lineWidth=1,this.ctx.strokeStyle="white",this.ctx.fillStyle="black",this.ctx.beginPath();for(var i=0;i<this.shape.length;i++)this.ctx.rotate(2*Math.PI/this.shape.length),this.ctx.lineTo(this.radius+this.radius*this.noise*this.shape[i],0);this.ctx.closePath(),this.ctx.fill(),this.ctx.stroke(),this.options.drawGuides&&(this.ctx.strokeStyle="red",this.ctx.fillStyle="rgba(255, 150, 0, 0.15)",this.ctx.lineWidth=.5,this.ctx.beginPath(),this.ctx.arc(0,0,this.radius,0,2*Math.PI),this.ctx.stroke(),this.ctx.fill()),this.ctx.restore()}},{key:"child",value:function(t){return new l(this.ctx,this.x,this.y,t,this.x_speed,this.y_speed,this.rotation_speed)}}]),l}();i.Asteroid=o;var l=function(t){function o(t,i,s,e,h,a,r){var n;return x(this,o),(n=u(this,d(o).call(this,t,i,s,100,20,1.5*Math.PI))).isCompromised=!1,n.maxHealth=5,n.health=n.maxHealth,n.thrusterPower=10*e||0,n.isThrusterOn=!1,n.steeringPower=e/2||0,n.leftThruster=!1,n.rightThruster=!1,n.weaponPower=h||500,n.bulletSpeed=r||200,n.weaponReloadTime=a||.25,n.timeUntilReloaded=n.weaponReloadTime,n.isLoaded=!1,n}return h(o,c),n(o,[{key:"draw",value:function(t){this.options=t||{},this.ctx.save(),this.ctx.translate(this.x,this.y),this.ctx.rotate(this.angle);var i="white";this.isCompromised&&(i="orange"),this.ctx.lineWidth=this.options.lineWidth||2,this.ctx.strokeStyle=this.options.strokeStyle||i,this.ctx.fillStyle=this.options.fillStyle||"black";var s=(this.options.angle||.5*Math.PI)/2,e=this.options.curve1||.25,h=this.options.curve2||.75;this.isThrusterOn&&(this.ctx.save(),this.ctx.strokeStyle="yellow",this.ctx.fillStyle="red",this.ctx.lineWidth=3,this.ctx.beginPath(),this.ctx.moveTo(Math.cos(Math.PI+.8*s)*this.radius/2,Math.sin(Math.PI+.8*s)*this.radius/2),this.ctx.quadraticCurveTo(2*-this.radius,0,Math.cos(Math.PI-.8*s)*this.radius/2,Math.sin(Math.PI-.8*s)*this.radius/2),this.ctx.closePath(),this.ctx.fill(),this.ctx.stroke(),this.ctx.restore()),this.ctx.beginPath(),this.ctx.moveTo(this.radius,0),this.ctx.quadraticCurveTo(Math.cos(s)*this.radius*h,Math.sin(s)*this.radius*h,Math.cos(Math.PI-s)*this.radius,Math.sin(Math.PI-s)*this.radius),this.ctx.quadraticCurveTo(-this.radius*e,0,Math.cos(Math.PI+s)*this.radius,Math.sin(Math.PI+s)*this.radius),this.ctx.quadraticCurveTo(Math.cos(-s)*this.radius*h,Math.sin(-s)*this.radius*h,this.radius,0),this.ctx.closePath(),this.ctx.fill(),this.ctx.stroke(),this.options.drawGuides&&(this.isCompromised?(this.ctx.strokeStyle="red",this.ctx.fillStyle="rgba(255, 0, 0, 0.15)"):(this.ctx.strokeStyle="green",this.ctx.fillStyle="rgba(0, 255, 0, 0.15)"),this.ctx.lineWidth=.5,this.ctx.beginPath(),this.ctx.arc(0,0,this.radius,0,2*Math.PI),this.ctx.stroke(),this.ctx.fill(),this.ctx.strokeStyle="white",this.ctx.fillStyle="white",this.ctx.lineWidth=.5,this.ctx.beginPath(),this.ctx.moveTo(Math.cos(-s)*this.radius,Math.sin(-s)*this.radius),this.ctx.lineTo(0,0),this.ctx.lineTo(Math.cos(s)*this.radius,Math.sin(s)*this.radius),this.ctx.moveTo(-this.radius,0),this.ctx.lineTo(0,0),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.arc(Math.cos(s)*this.radius*h,Math.sin(s)*this.radius*h,this.radius/40,0,2*Math.PI),this.ctx.fill(),this.ctx.beginPath(),this.ctx.arc(Math.cos(-s)*this.radius*h,Math.sin(-s)*this.radius*h,this.radius/40,0,2*Math.PI),this.ctx.fill(),this.ctx.beginPath(),this.ctx.arc(this.radius*e-this.radius,0,this.radius/50,0,2*Math.PI),this.ctx.fill()),this.ctx.restore()}},{key:"update",value:function(t){this.push(this.angle,this.isThrusterOn*this.thrusterPower,t),this.twist((this.rightThruster-this.leftThruster)*this.steeringPower,t),c.prototype.update.apply(this,arguments),this.isLoaded=0===this.timeUntilReloaded,this.isLoaded||(this.timeUntilReloaded-=Math.min(t,this.timeUntilReloaded)),this.isCompromised&&(this.health-=Math.min(t,this.health))}},{key:"shoot",value:function(t){var i=new p(this.ctx,this.x+Math.cos(this.angle)*this.radius,this.y+Math.sin(this.angle)*this.radius,.015,2,this.x_speed,this.y_speed,this.rotation_speed);return i.push(this.angle,this.bulletSpeed,t),this.push(this.angle+Math.PI,this.bulletSpeed,t),this.timeUntilReloaded=this.weaponReloadTime,i}}]),o}();i.Ship=l;var p=function(t){function l(t,i,s,e,h,a,r,n){var o;x(this,l);var c=Math.sqrt(e/.001/Math.PI);return(o=u(this,d(l).call(this,t,i,s,e,c,0,a,r,n))).lifeTime=h,o.life=1,o}return h(l,c),n(l,[{key:"draw",value:function(){this.ctx.save(),this.ctx.translate(this.x,this.y),this.ctx.rotate(this.angle),this.ctx.lineWidth=.5,this.ctx.strokeStyle="rgba(255, 255, 0,"+Math.max(this.life,.7)+")",this.ctx.fillStyle="rgba(255, 100, 0,"+Math.max(this.life,.7)+")",this.ctx.beginPath(),this.ctx.arc(0,0,this.radius,0,2*Math.PI),this.ctx.closePath(),this.ctx.fill(),this.ctx.stroke(),this.ctx.restore()}},{key:"update",value:function(t){this.life-=t/this.lifeTime,c.prototype.update.apply(this,arguments)}}]),l}();i.Projectile=p;var f=function(){function r(t,i,s,e,h,a){x(this,r),this.ctx=t,this.x=i,this.y=s,this.width=e,this.height=h,this.label=a+": "}return n(r,[{key:"draw",value:function(t,i){this.ctx.save(),this.ctx.strokeStyle="white",this.ctx.fillStyle="white",this.ctx.font=this.height+"px Arial";var s=this.ctx.measureText(this.label).width;this.ctx.fillText(this.label,this.x,this.y+this.height-1),this.ctx.beginPath(),this.ctx.rect(this.x+s,this.y,this.width,this.height),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.rect(this.x+s,this.y,this.width*(i/t),this.height),this.ctx.fill(),this.ctx.restore()}}]),r}();i.ProgressIndicator=f;var v=function(){function a(t,i,s,e,h){x(this,a),this.ctx=t,this.x=i,this.y=s,h=h||{},this.label=e+": "||"undefined label",this.digits=h.digits||0,this.textSize=h.textSize||"10",this.textAlign=h.textAlign||"end"}return n(a,[{key:"draw",value:function(t){this.ctx.save(),this.ctx.fillStyle="white",this.ctx.font=this.textSize+"px Arial",this.ctx.textAlign=this.textAlign,this.ctx.fillText(this.label+t.toFixed(this.digits),this.x,this.y),this.ctx.restore()}}]),a}();i.NumbersIndicator=v;var y=function(){function h(t,i,s,e){x(this,h),this.ctx=t,this.x=i||this.ctx.canvas.width/2,this.y=s||this.ctx.canvas.height/2,e=e||{},this.mainTextSize=e.mainTextSize||32,this.subTextSize=e.subTextSize||24,this.textAlign=e.textAlign||"center",this.fill=e.fill||"white"}return n(h,[{key:"draw",value:function(t,i,s){if(this.ctx.save(),this.ctx.fillStyle=this.fill,this.ctx.textAlign=this.textAlign,this.ctx.font=this.mainTextSize+"px Arial",this.ctx.fillText(t,this.x,this.y),this.ctx.font=this.subTextSize+"px Arial",null!=s){var e="Your score: "+s.toFixed(0);this.ctx.fillText(e,this.x,this.y+this.mainTextSize),this.ctx.fillText(i,this.x,this.y+this.mainTextSize+1.2*this.subTextSize)}else this.ctx.fillText(i,this.x,this.y+this.mainTextSize);this.ctx.restore()}}]),h}();i.Message=y}]);